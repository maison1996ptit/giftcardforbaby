<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Thi·ªáp g·ª≠i em b√©</title>

  <!-- Fonts (c·∫ßn internet) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600;700&family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#fff1f5; --bg2:#ffe4e6;
      --card:#ffffffcc; --text:#111827; --muted:#6b7280;
      --accent:#fb7185; --shadow:0 20px 50px rgba(0,0,0,.12);
      --radius:24px;
    }
    *{box-sizing:border-box}

    body{
      margin:0; min-height:100vh; display:grid; place-items:center;
      font-family: "Quicksand", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 20% 10%, var(--bg2), transparent 60%),
        radial-gradient(1000px 700px at 80% 90%, var(--bg2), transparent 55%),
        linear-gradient(135deg, var(--bg1), #fff);
      padding:24px;
      padding-bottom: 170px; /* ‚úÖ ch·ª´a ch·ªó cho mini music bar */
      position:relative;
      overflow-x:hidden;
    }

    /* ‚úÖ Overlay tr√°i tim m·ªù */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      opacity:.10;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220' viewBox='0 0 200 200'%3E%3Cpath d='M100 180s-70-40-70-90c0-25 20-45 45-45 15 0 25 8 25 8s10-8 25-8c25 0 45 20 45 45 0 50-70 90-70 90z' fill='%23fb7185'/%3E%3C/svg%3E");
      background-repeat: repeat;
      background-size: 190px 190px;
      filter: blur(.2px);
      mix-blend-mode: multiply;
    }

    .wrap{max-width:860px; width:100%;}
    .card{
      background:var(--card);
      border:1px solid rgba(255,255,255,.7);
      box-shadow:var(--shadow);
      border-radius:var(--radius);
      overflow:hidden;
      backdrop-filter: blur(8px);
      position:relative;
      z-index:1;
    }

    header{
      padding:28px 28px 12px;
      display:flex; gap:16px; align-items:center; justify-content:space-between;
    }

    h1{
      margin:0;
      font-family: "Dancing Script", cursive;
      font-size:40px;
      letter-spacing:-.01em;
      line-height:1.05;
    }
    .sub{color:var(--muted); margin-top:8px; line-height:1.6; font-weight:600}

    .grid{display:grid; grid-template-columns: 1.1fr .9fr; gap:18px; padding: 0 28px 28px;}
    @media (max-width: 860px){
      .grid{grid-template-columns:1fr}
      header{flex-direction:column; align-items:flex-start}
      body{padding-bottom: 190px;}
    }

    .letter{
      background:#fff;
      border-radius:18px;
      padding:22px;
      border:1px solid rgba(0,0,0,.06);
    }
    .content{margin-top:16px; line-height:1.9; font-size:16px}
    .sign{margin-top:18px; font-weight:800}

    .side{display:grid; gap:12px;}
    .panel{
      background:#fff;
      border-radius:18px;
      padding:16px;
      border:1px solid rgba(0,0,0,.06);
    }
    .row{display:flex; justify-content:space-between; gap:10px; align-items:center}
    .k{color:var(--muted); font-size:14px; font-weight:600}
    .v{font-weight:800}
    .hint{font-size:12px; color:var(--muted); text-align:center; font-weight:600}
    .heart{font-size:20px}

    .badgeBtn{
      appearance:none;
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 14px; border-radius:999px;
      background: rgba(251,113,133,.12);
      border:1px solid rgba(251,113,133,.25);
      color:#9f1239; font-weight:800;
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease;
      white-space:nowrap;
    }
    .badgeBtn:hover{filter: brightness(1.02)}
    .badgeBtn:active{transform: translateY(1px)}
    .badgeBtn:focus{outline: 3px solid rgba(251,113,133,.25); outline-offset: 3px}

    #daysText{
      font-family: "Dancing Script", cursive;
      font-size: 20px;
      font-weight: 700;
      letter-spacing: .2px;
    }
    #surpriseBtn
    {
       font-family: "Dancing Script", cursive;
    }
    .primaryBtn{
      width:100%;
      padding:12px 14px;
      border-radius:14px;
      border:0;
      background:var(--accent);
      color:white;
      font-weight:900;
      cursor:pointer;
      box-shadow: 0 14px 30px rgba(251,113,133,.35);
      transition: transform .12s ease, filter .12s ease;
    }
    .primaryBtn:hover{filter: brightness(1.02)}
    .primaryBtn:active{transform: translateY(1px) scale(.99)}

    /* ===== Drawer album ===== */
    .overlay{
      position:fixed; inset:0;
      background: rgba(17,24,39,.35);
      backdrop-filter: blur(2px);
      opacity:0; pointer-events:none;
      transition: opacity .18s ease;
      z-index:50;
    }
    .overlay.show{opacity:1; pointer-events:auto;}

    .drawer{
      position:fixed; top:0; right:0;
      height:100vh;
      width: min(460px, 92vw);
      background: rgba(255,255,255,.92);
      border-left: 1px solid rgba(0,0,0,.08);
      box-shadow: -20px 0 60px rgba(0,0,0,.18);
      transform: translateX(105%);
      transition: transform .25s cubic-bezier(.2,.7,.2,1);
      z-index:51;
      display:flex; flex-direction:column;
      padding:16px;
    }
    .drawer.open{transform: translateX(0);}

    .drawerHeader{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:8px 4px 12px;
    }
    .drawerTitle{
      display:flex; flex-direction:column;
      gap:2px;
    }
    .drawerTitle b{font-size:18px}
    .drawerTitle span{color:var(--muted); font-size:13px; font-weight:600}

    .iconBtn{
      appearance:none;
      width:auto;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid rgba(0,0,0,.08);
      background: rgba(17,24,39,.06);
      color:#111827;
      font-weight:900;
      cursor:pointer;
    }

    .preview{
      border-radius:18px;
      border:1px solid rgba(0,0,0,.06);
      overflow:hidden;
      background:#fff;
    }
    .previewImg{
      width:100%;
      height: 240px;
      object-fit: cover;
      display:block;
    }
    .previewMeta{
      padding:12px 12px 14px;
      line-height:1.5;
    }
    .previewMeta .cap{font-weight:900}
    .previewMeta .date{color:var(--muted); font-size:13px; font-weight:700; margin-top:4px}

    .thumbs{
      margin-top:12px;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
      overflow:auto;
      padding-bottom:8px;
    }
    .thumb{
      appearance:none;
      border-radius:14px;
      border:1px solid rgba(0,0,0,.08);
      background:#fff;
      padding:0;
      overflow:hidden;
      cursor:pointer;
    }
    .thumb img{
      width:100%;
      height:92px;
      object-fit: cover;
      display:block;
    }
    .thumb.active{
      outline: 3px solid rgba(251,113,133,.25);
      border-color: rgba(251,113,133,.35);
    }

    .drawerTip{
      margin-top:auto;
      color:var(--muted);
      font-size:12px;
      font-weight:700;
      padding:10px 4px 4px;
    }

    .annivNote{
      font-weight:700;
      color: var(--muted);
      font-size: 12px;
      margin-left: 6px;
      white-space: nowrap;
    }

    /* ===== ‚úÖ Mini Music Bar (LU√îN THU NH·ªé) ===== */
    .musicBar{
      position: fixed;
      left: 50%;
      bottom: 16px;
      transform: translateX(-50%);
      width: min(860px, calc(100vw - 32px));
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(0,0,0,.08);
      border-radius: 18px;
      box-shadow: 0 20px 60px rgba(0,0,0,.18);
      z-index: 80;
      padding: 10px 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
    }

    .musicMeta{
      display:flex;
      flex-direction:column;
      gap:2px;
      min-width: 0;
    }
    .musicTitle{ font-weight:1000; }
    .musicSub{
      color: var(--muted);
      font-size: 12px;
      font-weight: 800;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 520px;
    }

    .musicControls{
      display:flex;
      align-items:center;
      gap:10px;
      flex-shrink:0;
    }

    .vol{
      width: 140px;
    }
    @media (max-width: 520px){
      .vol{width: 90px;}
      .musicSub{max-width: 220px;}
    }

    /* ·∫®n audio element (ch·ªâ ƒëi·ªÅu khi·ªÉn b·∫±ng JS) */
    #bgAudio{display:none;}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <header>
        <div>
          <h1>G·ª≠i <span id="toName">Em</span> ‚ú®</h1>
          <div class="sub">M·ªôt b·ª©c th∆∞ nh·ªè, nh∆∞ng l√† ‚Äúc·∫£ b·∫ßu tr·ªùi‚Äù c·ªßa anh.</div>
        </div>

        <button class="badgeBtn" id="openMemories" type="button" aria-label="M·ªü k·ª∑ ni·ªám">
          <span class="heart">üíó</span>
          <span id="daysText">‚Ä¶</span>
        </button>
      </header>

      <div class="grid">
        <section class="letter">
          <div class="content" id="message">
            H√¥m nay anh l√†m m·ªôt t·∫•m thi·ªáp nh·ªè ƒë·ªÉ nh·∫Øc em r·∫±ng: em quan tr·ªçng v·ªõi anh nhi·ªÅu l·∫Øm.
            <br/><br/>
            C·∫£m ∆°n em v√¨ ƒë√£ ƒë·∫øn, v√¨ ƒë√£ ·ªü l·∫°i, v√† v√¨ ƒë√£ l√†m nh·ªØng ng√†y b√¨nh th∆∞·ªùng tr·ªü n√™n d·ªÖ th∆∞∆°ng h∆°n.
            <br/><br/>
            N·∫øu em m·ªát, c·ª© t·ª±a v√†o anh m·ªôt ch√∫t nh√©. Anh lu√¥n ·ªü ƒë√¢y.
            <br/><br/>
            V√† khi m√¨nh chu·∫©n b·ªã b∆∞·ªõc qua m·ªôt nƒÉm m·ªõi, anh ch·ªâ mong t·ª•i m√¨nh v·∫´n n·∫Øm tay nhau th·∫≠t ch·∫∑t:
            m√¨nh c√πng nhau ƒëi qua nh·ªØng ng√†y b·∫≠n r·ªôn, c√πng nhau ƒÉn m·ªôt b·ªØa ngon, c√πng nhau c∆∞·ªùi nhi·ªÅu h∆°n,
            v√† c√πng nhau b√¨nh y√™n h∆°n.
            <br/><br/>
            NƒÉm m·ªõi ƒë·∫øn, anh kh√¥ng h·ª©a ƒëi·ªÅu g√¨ qu√° l·ªõn‚Ä¶ ch·ªâ h·ª©a s·∫Ω th∆∞∆°ng em t·ª≠ t·∫ø h∆°n m·ªói ng√†y,
            l·∫Øng nghe em nhi·ªÅu h∆°n, v√† ·ªü c·∫°nh em nhi·ªÅu h∆°n ‚Äî theo c√°ch m√† em c·∫ßn.
            <br/><br/>
            Ch√∫c em m·ªôt nƒÉm m·ªõi th·∫≠t r·ª±c r·ª°, th·∫≠t nh·∫π nh√†ng, v√† lu√¥n ƒë∆∞·ª£c y√™u th∆∞∆°ng.
            C√≤n anh‚Ä¶ anh ch·ªçn y√™u em th√™m m·ªôt nƒÉm n·ªØa. üíó
          </div>
          <div class="sign">‚Äî <span id="fromName">Anh</span></div>
        </section>

        <aside class="side">
          <div class="panel">
            <div class="row">
              <div class="k">Ng√†y k·ª∑ ni·ªám</div>
              <div class="v">
                <span id="annivText"></span>
                <span class="annivNote">(M√¨nh l·∫•y m·ªëc ng√†y n√†y nh√© c·ª•c z√†ng)</span>
              </div>
            </div>
            <div class="row" style="margin-top:8px">
              <div class="k">ƒêi·ªÅu anh th√≠ch ·ªü em</div>
              <div class="v">N·ª• c∆∞·ªùi, v√† nh·ªØng c√¢u chuy·ªán</div>
            </div>
          </div>

          <div class="panel">
            <div class="k" style="margin-bottom:8px">L·ªùi nh·∫Øn nhanh</div>
            <button class="primaryBtn" id="surpriseBtn" type="button">B·∫•m ƒë·ªÉ nh·∫≠n ‚Äúb√≠ m·∫≠t‚Äù</button>
          </div>

          <div class="panel">
            <div class="k">M·ªôt l·ªùi th√∫ t·ªôi nh·ªè</div>
            <div style="margin-top:8px; line-height:1.7; font-weight:700">
              Anh th√∫ th·∫≠t l√† ƒë√¥i l√∫c anh ch∆∞a ƒë·ªß tinh t·∫ø,
              c√≥ khi b·∫≠n qu√° m√† qu√™n h·ªèi em h√¥m nay th·∫ø n√†o,
              c√≥ khi n√≥i √≠t h∆°n vi·ªác anh nghƒ© nhi·ªÅu.
              <br/><br/>
              Nh∆∞ng anh ƒëang c·ªë t·ª´ng ng√†y ƒë·ªÉ l√†m t·ªët h∆°n:
              bi·∫øt l·∫Øng nghe h∆°n, ki√™n nh·∫´n h∆°n,
              v√† th∆∞∆°ng em ƒë√∫ng c√°ch h∆°n ‚Äî kh√¥ng ch·ªâ b·∫±ng l·ªùi,
              m√† b·∫±ng c·∫£ h√†nh ƒë·ªông.
              <br/><br/>
              N·∫øu c√≥ l√∫c anh l√†m em bu·ªìn, cho anh xin m·ªôt c∆° h·ªôi ƒë·ªÉ s·ª≠a nha.
              Anh mu·ªën tr·ªü th√†nh phi√™n b·∫£n t·ªët h∆°n‚Ä¶ v√¨ em. üíó
            </div>
          </div>
        </aside>
      </div>
    </div>
  </div>

  <!-- Overlay + Drawer album -->
  <div class="overlay" id="overlay"></div>

  <aside class="drawer" id="drawer" aria-hidden="true">
    <div class="drawerHeader">
      <div class="drawerTitle">
        <b>Album k·ª∑ ni·ªám</b>
        <span id="memCount">0 t·∫•m ·∫£nh</span>
      </div>
      <button class="iconBtn" id="closeDrawer" type="button">‚úï</button>
    </div>

    <div class="preview">
      <img class="previewImg" id="previewImg" alt="·∫¢nh k·ª∑ ni·ªám" />
      <div class="previewMeta">
        <div class="cap" id="previewCap">‚Äî</div>
        <div class="date" id="previewDate">‚Äî</div>
      </div>
    </div>

    <div class="thumbs" id="thumbs"></div>

    <div class="drawerTip">Tip: b·∫•m n·ªÅn t·ªëi ho·∫∑c ph√≠m ESC ƒë·ªÉ ƒë√≥ng.</div>
  </aside>

  <!-- ‚úÖ Mini Music Bar (nh·∫°c local t·ª´ folder music/) -->
  <div class="musicBar" id="musicBar" aria-label="Tr√¨nh ph√°t nh·∫°c (mini)">
    <div class="musicMeta">
      <div class="musicTitle">üéµ Nh·∫°c n·ªÅn</div>
      <div class="musicSub" id="musicLabel">Nh·∫°c t·ª´ folder /music (b·∫•m Play)</div>
    </div>

    <div class="musicControls">
      <button class="iconBtn" id="playPauseBtn" type="button">Play</button>
      <input class="vol" id="vol" type="range" min="0" max="1" step="0.01" value="0.7" />
    </div>

    <!-- Nh·∫°c local -->
    <audio id="bgAudio" preload="auto" loop playsinline>
      <source src="music/L√Ä ANH - Cover Nh·∫°c Ngo·∫°i L·ªùi Vi·ªát by PH·∫†M L·ªäCH ( It‚Äôs You -M·ªông Nhi√™n).mp3" type="audio/mpeg">
    </audio>
  </div>

  <script>
    // ‚úÖ T√ôY CH·ªàNH NHANH
    const TO_NAME = "B√© iu";
    const FROM_NAME = "Anh B√©";
    const ANNIVERSARY = "2025-12-25"; // yyyy-mm-dd
    const SECRET = "Anh th∆∞∆°ng em nhi·ªÅu h∆°n em t∆∞·ªüng ƒë√≥ ü•∫üíó";

    // ‚úÖ ·∫¢NH K·ª∂ NI·ªÜM (·∫£nh local trong folder pictures/)
    const MEMORIES = [
      { src: "pictures/41d133d7-17e1-4642-85c2-b83a8228d898.jpg", caption: "Valentine ƒë·∫ßu ti√™n ti√™n c·ªßa hai ƒë·ª©a", date: "14/02/2026" },
      { src: "pictures/56b6299f-82a2-48fc-bd33-448497152ba4.jpg", caption: "·∫¢nh n·ªØa n√®", date: "14/02/2026" },
      { src: "pictures/61af34c5-0ad4-4b8b-94d4-e6e1c66e2744.jpg", caption: "ƒê√¢y n·ªØa", date: "14/02/2026" },
      { src: "pictures/39941790-ba31-4f44-b16b-eee0e788480d.jpg", caption: "T·ª•i tui ƒëi z≈©ng t√†u", date: "08/02/2026" },
      { src: "pictures/86663718-0276-4f82-8964-eb87381df988.jpg", caption: "·∫¢nh ƒë√¢y n·ªØa", date: "08/02/2026" },
    ];

    // render name
    document.getElementById("toName").textContent = TO_NAME;
    document.getElementById("fromName").textContent = FROM_NAME;

    // show anniv dd/mm/yyyy
    const d = new Date(ANNIVERSARY + "T00:00:00");
    const dd = String(d.getDate()).padStart(2,"0");
    const mm = String(d.getMonth()+1).padStart(2,"0");
    const yy = d.getFullYear();
    document.getElementById("annivText").textContent = `${dd}/${mm}/${yy}`;

    // days counter
    const now = new Date();
    const diff = Math.floor((now - d) / (1000*60*60*24));
    document.getElementById("daysText").textContent =
      diff >= 0 ? `M√¨nh b√™n nhau ${diff} ng√†y` : `C√≤n ${Math.abs(diff)} ng√†y n·ªØa`;

    // secret
    document.getElementById("surpriseBtn").addEventListener("click", () => {
      alert(SECRET);
    });

    // =========================
    // ‚úÖ Drawer album logic
    // =========================
    const overlay = document.getElementById("overlay");
    const drawer = document.getElementById("drawer");
    const openMemories = document.getElementById("openMemories");
    const closeDrawer = document.getElementById("closeDrawer");

    const thumbs = document.getElementById("thumbs");
    const memCount = document.getElementById("memCount");
    const previewImg = document.getElementById("previewImg");
    const previewCap = document.getElementById("previewCap");
    const previewDate = document.getElementById("previewDate");

    function openDrawer(){
      overlay.classList.add("show");
      drawer.classList.add("open");
      drawer.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";
    }
    function closeDrawerFn(){
      overlay.classList.remove("show");
      drawer.classList.remove("open");
      drawer.setAttribute("aria-hidden", "true");
      document.body.style.overflow = "";
    }

    openMemories.addEventListener("click", openDrawer);
    closeDrawer.addEventListener("click", closeDrawerFn);
    overlay.addEventListener("click", closeDrawerFn);

    document.addEventListener("keydown", (e) => {
      if(e.key === "Escape") closeDrawerFn();
    });

    function setPreview(idx){
      const item = MEMORIES[idx];
      if(!item) return;
      previewImg.src = item.src;
      previewCap.textContent = item.caption || "K·ª∑ ni·ªám";
      previewDate.textContent = item.date || "";
      [...thumbs.querySelectorAll(".thumb")].forEach((b, i) => {
        b.classList.toggle("active", i === idx);
      });
    }

    function renderMemories(){
      memCount.textContent = `${MEMORIES.length} t·∫•m ·∫£nh`;
      thumbs.innerHTML = "";
      MEMORIES.forEach((m, idx) => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "thumb";
        btn.innerHTML = `<img src="${m.src}" alt="${m.caption || "·∫¢nh k·ª∑ ni·ªám"}">`;
        btn.addEventListener("click", () => setPreview(idx));
        thumbs.appendChild(btn);
      });
      setPreview(0);
    }
    renderMemories();

    // =========================
    // ‚úÖ Mini Music (LOCAL) logic
    // =========================
    const audio = document.getElementById("bgAudio");
    const playPauseBtn = document.getElementById("playPauseBtn");
    const vol = document.getElementById("vol");
    const musicLabel = document.getElementById("musicLabel");

    // ƒë·ªïi t√™n file n·∫øu b·∫°n ƒë·∫∑t kh√°c
    // audio.src = "music/la-anh.mp3"; // (kh√¥ng c·∫ßn n·∫øu ƒë√£ set <source>)

    audio.volume = Number(vol.value || 0.7);

    vol.addEventListener("input", () => {
      audio.volume = Number(vol.value);
    });

    async function tryPlay(){
      try{
        await audio.play();
        playPauseBtn.textContent = "Pause";
        musicLabel.textContent = "ƒêang ph√°t (nh·∫°c local)";
      }catch{
        // autoplay b·ªã ch·∫∑n -> user b·∫•m Play s·∫Ω ƒë∆∞·ª£c
        musicLabel.textContent = "Tr√¨nh duy·ªát ch·∫∑n t·ª± ph√°t ‚Äî b·∫•m Play 1 l·∫ßn nh√©";
      }
    }

    playPauseBtn.addEventListener("click", async () => {
      if (audio.paused) {
        await tryPlay();
      } else {
        audio.pause();
        playPauseBtn.textContent = "Play";
        musicLabel.textContent = "ƒê√£ t·∫°m d·ª´ng";
      }
    });

    audio.addEventListener("pause", () => playPauseBtn.textContent = "Play");
    audio.addEventListener("play",  () => playPauseBtn.textContent = "Pause");

    // ‚úÖ T·ª± ph√°t sau ‚Äúclick ƒë·∫ßu ti√™n‚Äù ·ªü b·∫•t k·ª≥ ƒë√¢u (kh√¥ng vi ph·∫°m ch·∫∑n autoplay)
    document.addEventListener("click", () => {
      if (audio.paused) tryPlay();
    }, { once: true });
  </script>
</body>
</html>
